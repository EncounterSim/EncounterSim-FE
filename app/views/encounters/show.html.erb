<div class="jumbotron text-center">
<h1>Encounter Results</h1>
</div>
<h3 class="text-center">Simulation ID: <%= @encounter.sim_id %></h3>
<table class="table">
  <thead>
    <th scope="col">Total Wins</th>
    <th scope="col">Total Losses</th>
    <th scope="col">Total Rounds</th>
    <th scope="col">Total Combats Simulated</th>
    <th scope="col">Win Percentage</th>
  </thead>
  <tbody>
    <tr>
      <td><%= @encounter.total_wins %></td>
      <td><%= @encounter.total_losses %></td>
      <td><%= @encounter.total_rounds %></td>
      <td><%= @encounter.total_combats %></td>
      <td><%= @encounter.win_percentage * 100 %>%</td>
    </tr>
  </tbody>
</table>
<table class="table">
  <thead>
    <th scope="col">Average Rounds Per Combat</th>
    <th scope="col">Average Rounds to Win</th>
    <th scope="col">Average Rounds to Lose</th>
  </thead>
  <tbody>
    <tr>
      <td><%= @encounter.avg_rounds[:avg_rounds] %></td>
      <td><%= @encounter.avg_rounds[:avg_for_wins] %></td>
      <td><%= @encounter.avg_rounds[:avg_for_loses] %></td>
    </tr>
  </tbody>
</table>
<div style="display: flex;">
    <div class="card" style="width: 20%;">
      <div class="card-title"><h3><%= @encounter.p1_stats[:player] %> Stats</h3></div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Avg Damage Per Round: <%= @encounter.p1_stats[:avg_dmg] %></li>
        <li class="list-group-item">Avg Hit Rate Across All Combats: <%= @encounter.p1_stats[:hit_rate] %></li>
        <li class="list-group-item">Best Showing: <%= @encounter.best_combat("p1") %></li>
        <li class="list-group-item">Worst Showing: <%= @encounter.worst_combat("p1") %></li>
        <li class="list-group-item">Total Damage Across Simulation: <%= @encounter.sim_damage("p1") %></li>
        <li class="list-group-item">Times Killed: <%= @encounter.times_killed(@encounter.p1_stats[:player]) %></li>
      </ul>
    </div>
    <div class="card" style="width: 20%;">
      <div class="card-title"><h3><%= @encounter.p2_stats[:player] %> Stats</h3></div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Avg Damage Per Round: <%= @encounter.p2_stats[:avg_dmg] %></li>
        <li class="list-group-item">Avg Hit Rate Across All Combats: <%= @encounter.p2_stats[:hit_rate] %></li>
        <li class="list-group-item">Best Showing: <%= @encounter.best_combat("p2") %></li>
        <li class="list-group-item">Worst Showing: <%= @encounter.worst_combat("p2") %></li>
        <li class="list-group-item">Total Damage Across Simulation: <%= @encounter.sim_damage("p2") %></li>
        <li class="list-group-item">Times Killed: <%= @encounter.times_killed(@encounter.p2_stats[:player]) %></li>
      </ul>
    </div>
    <div class="card" style="width: 20%;">
      <div class="card-title"><h3><%= @encounter.p3_stats[:player] %> Stats</h3></div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Avg Damage Per Round: <%= @encounter.p3_stats[:avg_dmg] %></li>
        <li class="list-group-item">Avg Hit Rate Across All Combats: <%= @encounter.p3_stats[:hit_rate] %></li>
        <li class="list-group-item">Best Showing: <%= @encounter.best_combat("p3") %></li>
        <li class="list-group-item">Worst Showing: <%= @encounter.worst_combat("p3") %></li>
        <li class="list-group-item">Total Damage Across Simulation: <%= @encounter.sim_damage("p3") %></li>
        <li class="list-group-item">Times Killed: <%= @encounter.times_killed(@encounter.p3_stats[:player]) %></li>
      </ul>
    </div>
    <div class="card" style="width: 20%;">
      <div class="card-title"><h3><%= @encounter.p4_stats[:player] %> Stats</h3></div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Avg Damage Per Round: <%= @encounter.p4_stats[:avg_dmg] %></li>
        <li class="list-group-item">Avg Hit Rate Across All Combats: <%= @encounter.p4_stats[:hit_rate] %></li>
        <li class="list-group-item">Best Showing: <%= @encounter.best_combat("p4") %></li>
        <li class="list-group-item">Worst Showing: <%= @encounter.worst_combat("p4") %></li>
        <li class="list-group-item">Total Damage Across Simulation: <%= @encounter.sim_damage("p4") %></li>
        <li class="list-group-item">Times Killed: <%= @encounter.times_killed(@encounter.p4_stats[:player]) %></li>
      </ul>
    </div>
    <div class="card" style="width: 20%;">
      <div class="card-title"><h3><%= @encounter.p5_stats[:player] %> Stats</h3></div>
      <ul class="list-group list-group-flush">
        <li class="list-group-item">Avg Damage Per Round: <%= @encounter.p5_stats[:avg_dmg] %></li>
        <li class="list-group-item">Avg Hit Rate Across All Combats: <%= @encounter.p5_stats[:hit_rate] %></li>
        <li class="list-group-item">Best Showing: <%= @encounter.best_combat("p5") %></li>
        <li class="list-group-item">Worst Showing: <%= @encounter.worst_combat("p5") %></li>
        <li class="list-group-item">Total Damage Across Simulation: <%= @encounter.sim_damage("p5") %></li>
        <li class="list-group-item">Times Killed: <%= @encounter.times_killed(@encounter.p5_stats[:player]) %></li>
      </ul>
    </div>
</div>

<div class="card">
  <h2><div class="card-title" style="text-align: center"><%= @encounter.monster_stats[:player] %> Stats</div></h2>
  <ul class="list-group">
    <h3><li class="list-group-item" style="text-align: center">Average Monster Damage: <%= @encounter.monster_stats[:avg_dmg] %></li></h3>
    <h3><li class="list-group-item" style="text-align: center">Average Monster Hit Rate: <%= @encounter.monster_stats[:hit_rate] %></li></h3>
    <h3><li class="list-group-item" style="text-align: center">Best Showing: <%=  @encounter.best_combat("monster") %></li></h3>
    <h3><li class="list-group-item" style="text-align: center">Worst Showing: <%= @encounter.worst_combat("monster") %></li></h3>
    <h3><li class="list-group-item" style="text-align: center">Players Killed: <%= @encounter.total_deaths %></li></h3>
  </ul>
</div>